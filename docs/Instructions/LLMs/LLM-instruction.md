---
tags:
  - help
---

!!! info "Назначение"
    Workflow описывает алгоритм эффективного ведения диалога с LLM по одной теме с момента начала работы над первым промптом и вплоть до миграции в новый топик из-за исчерпания контекстного окна.

**1. Подготовка сырого промпта**

* Перед началом работы проверить личную базу знаний на предмет релевантных промптов или саммари, которые могут служить отправной точкой начала работы;
* Самостоятельно собрать все релевантные сведения по теме топика и по выбранному шаблону написать сырой промпт. [Ссылки на шаблоны]. Разделы шаблона, не актуальные для текущего промпта, исключить.

**2. Структурирование промпта (опционально)**

* При сложных многоэтапных задачах или неуверенности в структуре промпта пропустить сырой промпт через выбранный мета-промпт для его структурирования [Ссылки на мета промпты].

**3. Получение первичного ответа**

* Создать новый топик с финальным промптом и получить ответ LLM;
* Весь дальнейший диалог с LLM по этой теме вести внутри созданного топика, пока не исчерпано контекстное окно.

**4. Оценка качества первичного ответа**

Сравнить полученный ответ с критериями качества [Ссылка на перечень критериев качества]:

* При критическом несоответствии ответа ожидаемому вернуться к шагу 1 и доработать промпт;
* При частичном несоответствии ответа ожидаемому уточнить в том же топике;
* В случае высокого качества ответа сохранить промпт в личную базу знаний.

**5. Развитие диалога**

* Уточнять и углублять ответ в топике с помощью специализированных техник [Ссылка на техники уточнения]. Качество каждого нового ответа оценивать в соответствии с правилами, описанными в шаге 4;

* Проверять соответствие исходной цели при смене темы или после получения крупного блока информации [Ссылка на техники уточнения – эта техника будет там же];

* Переходить к смежным темам по своему усмотрению – главное обеспечить плавный переход через связующие фразы для сохранения контекста [Ссылка на смены ракурса].

**6. Мониторинг контекстного окна**

Отслеживать индикаторы заполнения контекстного окна:

* Для простых топиков при первых признаках деградации контекста (ответы стали короче, LLM забывает детали из начала топика, появились противоречия) использовать промпт для создания рабочего саммари [Ссылка на промпт для создания саммари]. Проверить рабочее саммари на полноту и точность вручную, при необходимости запросить у LLM его корректировку. ;
* Для критически важных топиков (критичность определяется пользователем) создавать рабочие саммари регулярно, каждые 10-15 сообщений, даже если признаков деградации пока нет. При создании рабочего саммари использовать 2 разных промпта и сравнить полноту сохранения контекста (вручную или с использованием промпта-арбитра). Сохранить лучшее рабочее саммари как «Чекпоинт N».

!!! warning "Внимание"
    Промпты для создания саммари всегда запускаются в отдельных новых топиках

**7. Перенос контекста**

Подготовить итоговое саммари для переноса диалога в новый топик:

* Для простых топиков проверить, что саммари содержит все ключевые решения, факты и контекст, позволяющие продолжить коммуникацию с LLM по текущей теме в новом топике, используя чек-лист [ссылка на чек-лист для проверки саммари]. При необходимости дополнить саммари вручную упущенными, но критически важными деталями;
* Для критически важных топиков проверить все созданные чекпоинты на предмет ключевых решений, фактов и контекста. При наличии важной информации в предыдущих чекпоинтах, которая отсутствует в последнем, объединить критически важные элементы в итоговое саммари для переноса (вручную или с помощью промпта-агрегатора). Если итоговый документ получается чрезмерно громоздким, вручную сократить его до компактного «мета-саммари» без потери сути. Проверить итоговое саммари по чек листу [ссылка на чек-лист для проверки саммари].

Использовать итоговое саммари для описания контекста/входных данных в новом сыром промпте. Вернуться к шагу 1.